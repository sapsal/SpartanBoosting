@using SpartanBoosting.ViewModel
@model BoosterDashboardViewModel
@{
	Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
}

<!-- end:: Header -->
<div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">

	<!-- begin:: Subheader -->
	<div class="kt-subheader   kt-grid__item" id="kt_subheader">
		<div class="kt-container  kt-container--fluid ">
			<div class="kt-subheader__main">
				<h3 class="kt-subheader__title">Dashboard</h3>

			</div>
		</div>
	</div>

	<!-- end:: Subheader -->
	<!-- begin:: Content -->
	<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
		<div class="kt-portlet kt-portlet--mobile">
			<div class="kt-portlet__head">
				<div class="kt-portlet__head-label">
					<h3 class="kt-portlet__head-title">
						Available Jobs
					</h3>
				</div>
			</div>

			<div class="kt-portlet__body">
				<!--begin: Datatable -->
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link active" data-toggle="tab" href="#" data-target="#kt_tft_solo_boost_tab">TFT Solo</a>
					</li>
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link" data-toggle="tab" href="#kt_tft_placement_matches_tab">TFT Placement</a>
					</li>
				</ul>
				<div id="kt_table_1_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
					<div class="col-sm-12">
						<div class="tab-content">
							<div class="tab-pane active" id="kt_tft_placement_matches_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.TFTPlacement))
										{
											<tr>
												<th scope="row">@item.Id</th>
												<td>@(item.TFTPlacementModel.Server)</td>
												<td>Normal</td>
												<td>@($"{item.TFTPlacementModel.LastSeasonStanding} With {item.TFTPlacementModel.NumberOfGames} Games")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn accept-job" data-booster-information="@Newtonsoft.Json.JsonConvert.SerializeObject(item)">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
							<div class="tab-pane" id="kt_tft_solo_boost_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.TFTBoosting))
										{
											<tr>
												<th scope="row">@item.Id</th>
												<td>@(item.TFTBoostingModel.Server)</td>
												<td>Normal</td>
												<td>@($"{item.TFTBoostingModel.YourCurrentLeague} {item.TFTBoostingModel.CurrentDivision} {item.TFTBoostingModel.CurrentLP} to {item.TFTBoostingModel.DesiredCurrentLeague} {item.TFTBoostingModel.DesiredCurrentDivision}")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn accept-job" data-booster-information="@Newtonsoft.Json.JsonConvert.SerializeObject(item)">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
				<!--end: Datatable -->
			</div>
		</div>
		<!--end::Row-->
		<!--end::Dashboard 1-->
	</div>

	<!-- end:: Content -->
</div>
<div class="modal fade" id="lol-details-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle">TFT Details</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-6">Username</div>
					<div class="col-6">Password</div>
				</div>
				<div class="row">
					<div class="col-6" id="lol-username"></div>
					<div class="col-6" id="lol-password"></div>
				</div>
			</div>
			<div class="modal-footer">

			</div>
		</div>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="~/assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
<script src="~/assets/js/scripts.bundle.js" type="text/javascript"></script>
<script src="~/assets/plugins/custom/datatables/datatables.bundle.js"></script>
<link href="~/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" />
<script>
	$(document).ready(function () {
		RenderDT($('.table'))
		function RenderDT(element) {
			$(element).DataTable({
				lengthMenu: [5, 10, 25, 50],
				"oLanguage": { "sZeroRecords": "", "sEmptyTable": "" },
				pageLength: 10,
				"bFilter": true,
				"bInfo": false,
				"bAutoWidth": false,
				// Order settings
				order: [[0, 'asc']],
				scrollX: true,
				"bLengthChange": false,
			});
		}
		$(document).on("click", '.active-jobs-nav-link', function () {
			$('.table').DataTable().destroy();
			RenderDT($('.table'))
		});

	});
</script>
<script src="~/js/BoosterPanel.js"></script>