@using SpartanBoosting.ViewModel
@model BoosterDashboardViewModel
@{
	Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
}

<!-- end:: Header -->
<div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">

	<!-- begin:: Subheader -->
	<div class="kt-subheader   kt-grid__item" id="kt_subheader">
		<div class="kt-container  kt-container--fluid ">
			<div class="kt-subheader__main">
				<h3 class="kt-subheader__title">Dashboard</h3>

			</div>
		</div>
	</div>

	<!-- end:: Subheader -->
	<!-- begin:: Content -->
	<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
		<div class="kt-portlet kt-portlet--mobile">
			<div class="kt-portlet__head">
				<div class="kt-portlet__head-label">
					<h3 class="kt-portlet__head-title">
						Available Jobs
					</h3>
				</div>
			</div>

			<div class="kt-portlet__body">
				<!--begin: Datatable -->
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link active" data-toggle="tab" href="#" data-target="#kt_solo_tab">Solo</a>
					</li>
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link" data-toggle="tab" href="#kt_duo_tab">Duo</a>
					</li>
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link " data-toggle="tab" href="#" data-target="#kt_placement_matches_tab">Placement Matches</a>
					</li>
					<li class="nav-item">
						<a class="nav-link active-jobs-nav-link" data-toggle="tab" href="#kt_win_boost_tab">Win Boost</a>
					</li>
				</ul>
				<div id="kt_table_1_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
					<div class="col-sm-12">
						<div class="tab-content">
							<div class="tab-pane active" id="kt_solo_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Queue Tyoe</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.SoloBoosting))
										{
											<tr>
												<th scope="row">1</th>
												<td>@(item.BoostingModel.Server)</td>
												<td>@(item.BoostingModel.TypeOfQueue)</td>
												<td>Normal</td>
												<td>@($"{item.BoostingModel.YourCurrentLeague} {item.BoostingModel.CurrentDivision} {item.BoostingModel.CurrentLP} to {item.BoostingModel.DesiredCurrentLeague} {item.BoostingModel.DesiredCurrentDivision}")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn ">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
							<div class="tab-pane" id="kt_duo_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Queue Tyoe</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.DuoBoosting))
										{
											<tr>
												<th scope="row">1</th>
												<td>@(item.BoostingModel.Server)</td>
												<td>@(item.BoostingModel.TypeOfQueue)</td>
												<td>Normal</td>
												<td>@($"{item.BoostingModel.YourCurrentLeague} {item.BoostingModel.CurrentDivision} {item.BoostingModel.CurrentLP} to {item.BoostingModel.DesiredCurrentLeague} {item.BoostingModel.DesiredCurrentDivision}")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn ">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>

							<div class="tab-pane" id="kt_win_boost_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Queue Tyoe</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.WinBoosting))
										{
											<tr>
												<th scope="row">1</th>
												<td>@(item.WinBoostModel.Server)</td>
												<td>@(item.WinBoostModel.TypeOfQueue)</td>
												<td>Normal</td>
												<td>@($"{item.WinBoostModel.YourCurrentLeague} {item.WinBoostModel.CurrentDivision} With {item.WinBoostModel.NumOfGames} Games")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn ">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
							<div class="tab-pane" id="kt_placement_matches_tab" role="tabpanel">
								<table class="table ">
									<thead>
										<tr>
											<th scope="col">Order Id</th>
											<th scope="col">Server</th>
											<th scope="col">Queue Tyoe</th>
											<th scope="col">Priority</th>
											<th scope="col">Boost Details</th>
											<th scope="col">Actions</th>
											<th>Pay</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.PurchaseForm.Where(x => x.PurchaseType == SpartanBoosting.Utils.PurchaseTypeEnum.PurchaseType.PlacementMatches))
										{
											<tr>
												<th scope="row">1</th>
												<td>@(item.PlacementMatchesModel.Server)</td>
												<td>@(item.PlacementMatchesModel.TypeOfQueue)</td>
												<td>Normal</td>
												<td>@($"{item.PlacementMatchesModel.LastSeasonStanding} With {item.PlacementMatchesModel.NumOfGames} Games")</td>
												<td><span style="color: #51dc55 !important;">€@PricingExtensions.BoosterPay(item.Pricing)</span></td>
												<td>
													<button class="btn-success btn ">Accept</button>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
				<!--end: Datatable -->
			</div>
		</div>
		<!--end::Row-->
		<!--end::Dashboard 1-->
	</div>

	<!-- end:: Content -->
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="~/assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
<script src="~/assets/js/scripts.bundle.js" type="text/javascript"></script>
<script src="~/assets/plugins/custom/datatables/datatables.bundle.js"></script>
<link href="~/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" />
<script>
	$(document).ready(function () {
		RenderDT($('.table'))
		function RenderDT(element) {
			$(element).DataTable({
				lengthMenu: [5, 10, 25, 50],
				"oLanguage": { "sZeroRecords": "", "sEmptyTable": "" },
				pageLength: 10,
				"bFilter": true,
				"bInfo": false,
				"bAutoWidth": false,
				// Order settings
				order: [[0, 'desc']],
				scrollX: true,
				"bLengthChange": false,
			});
		}
		$(document).on("click", '.active-jobs-nav-link', function () {
			debugger;
			$('.table').DataTable().destroy();
			RenderDT($('.table'))
		});

	});
</script>